/* style.css - Additions & Refinements */

/* General UI Enhancements */
:root {
    /* ... existing variables ... */
    --interactive-area-bg: var(--bg-secondary);
    --visual-test-area-bg: var(--bg-tertiary);
    --code-text-bg: color-mix(in srgb, var(--bg-secondary) 80%, var(--bg-primary)); /* Darker for code */
}
html[data-theme="dark"] {
    /* ... existing variables ... */
    --interactive-area-bg: var(--bg-tertiary);
    --visual-test-area-bg: #111; /* Very dark for visual tests */
    --code-text-bg: color-mix(in srgb, var(--bg-secondary) 80%, var(--bg-primary));
}

.styled-input, .styled-select {
    padding: 0.5rem 0.75rem;
    border: 1px solid var(--border-primary);
    background-color: var(--bg-primary);
    color: var(--text-primary);
    border-radius: var(--radius-md);
    font-size: 0.9em;
    margin-top: 0.5rem;
    margin-right: 0.5rem;
    max-width: 100%;
}
.styled-select {
    appearance: none; /* Consider custom dropdown arrow if needed */
    background-image: url('data:image/svg+xml;charset=US-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22292.4%22%20height%3D%22292.4%22%3E%3Cpath%20fill%3D%22%23007CB2%22%20d%3D%22M287%2069.4a17.6%2017.6%200%200%200-13-5.4H18.4c-5%200-9.3%201.8-12.9%205.4A17.6%2017.6%200%200%200%200%2082.2c0%205%201.8%209.3%205.4%2012.9l128%20127.9c3.6%203.6%207.8%205.4%2012.8%205.4s9.2-1.8%2012.8-5.4L287%2095c3.5-3.5%205.4-7.8%205.4-12.8%200-5-1.9-9.2-5.4-12.8z%22%2F%3E%3C%2Fsvg%3E');
    background-repeat: no-repeat;
    background-position: right .7em top 50%;
    background-size: .65em auto;
    padding-right: 2.5em; /* Space for arrow */
}
html[data-theme="dark"] .styled-select {
     background-image: url('data:image/svg+xml;charset=US-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22292.4%22%20height%3D%22292.4%22%3E%3Cpath%20fill%3D%22%23cccccc%22%20d%3D%22M287%2069.4a17.6%2017.6%200%200%200-13-5.4H18.4c-5%200-9.3%201.8-12.9%205.4A17.6%2017.6%200%200%200%200%2082.2c0%205%201.8%209.3%205.4%2012.9l128%20127.9c3.6%203.6%207.8%205.4%2012.8%205.4s9.2-1.8%2012.8-5.4L287%2095c3.5-3.5%205.4-7.8%205.4-12.8%200-5-1.9-9.2-5.4-12.8z%22%2F%3E%3C%2Fsvg%3E');
}


.button-group {
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem;
    margin-top: 0.5rem;
}
.action-btn-sm {
    padding: 0.4rem 0.8rem;
    font-size: 0.85em;
}

.card-value-small { /* For secondary readings below main value */
    font-size: 0.85em;
    color: var(--text-secondary);
    margin-top: 0.25rem;
    font-family: var(--font-mono);
}

.placeholder-text-large {
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--text-muted);
    font-style: italic;
    height: 100%;
    min-height: 100px; /* Ensure it's visible */
    text-align: center;
}

/* Visual Test Areas */
.visual-test-area {
    width: 100%;
    min-height: 200px;
    background-color: var(--visual-test-area-bg);
    border: 1px solid var(--border-secondary);
    border-radius: var(--radius-md);
    margin-top: 0.75rem;
    margin-bottom: 0.75rem;
    position: relative; /* For canvas overlay */
    overflow: hidden; /* Clip canvas */
}
.visual-test-area canvas,
.visual-test-canvas-small {
    display: block;
    width: 100%;
    height: 100%;
    max-height: 250px; /* Limit height of smaller canvases */
}
.visual-test-canvas-small {
     border: 1px solid var(--border-secondary);
     margin-top: 0.5rem;
}

/* Interactive Areas */
.interactive-area {
    padding: 1rem;
    background-color: var(--interactive-area-bg);
    border: 1px solid var(--border-secondary);
    border-radius: var(--radius-md);
    margin-top: 0.75rem;
    text-align: center;
    color: var(--text-muted);
    min-height: 80px;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: crosshair; /* For mouse test area */
}

/* Specific Tool Styles */

/* Pixel Test Fullscreen Area */
#pixelTestFullscreenArea.checker {
    background-image:
        linear-gradient(45deg, #808080 25%, transparent 25%),
        linear-gradient(-45deg, #808080 25%, transparent 25%),
        linear-gradient(45deg, transparent 75%, #808080 75%),
        linear-gradient(-45deg, transparent 75%, #808080 75%);
    background-size:20px 20px;
    background-position:0 0, 0 10px, 10px -10px, -10px 0px;
}

/* VSync Test Canvas */
#vsyncCanvas {
    background-color: #333;
}
html[data-theme="light"] #vsyncCanvas {
    background-color: #ccc;
}

/* Keyboard test input */
#keyboardTestInput {
    width: 100%;
    margin-bottom: 0.5rem;
}

/* Shape Detection Video/Canvas */
#shapeDetectionVideo, #shapeDetectionCanvas {
    border-radius: var(--radius-sm);
}

/* CVD Simulation Filter */
body.cvd-protanopia { filter: url(#protanopia); }
body.cvd-deuteranopia { filter: url(#deuteranopia); }
body.cvd-tritanopia { filter: url(#tritanopia); }
body.cvd-achromatopsia { filter: url(#achromatopsia); }

/* Sidebar SVG Icons Refinement */
.nav-list .nav-link svg {
    fill: none;
    stroke: currentColor;
    stroke-width: 1.5; /* Ensure consistent stroke */
    width: 20px; /* Standardize size */
    height: 20px;
}
.nav-list .nav-link.active svg { /* Active link icon color */
    stroke: var(--accent-text-interactive);
}

/* Make sure loading spinner within buttons is styled correctly */
.action-btn .loading-spinner {
    width: 0.9em;
    height: 0.9em;
    border-width: 2px;
    margin-left: 0.5em;
}
.action-btn .btn-text + .loading-spinner { /* If spinner is after text */
    margin-left: 0.5em;
}
.action-btn.loading .btn-text,
.action-btn.loading svg:not(.loading-spinner) { /* Hide original icon when loading */
    opacity: 0.5;
}

/* Progress bar within cards (e.g., checksum) */
.info-card .progress-bar-container {
    height: 0.5rem; /* Smaller progress bar in cards */
}

/* Override default outline for focus on interactive elements */
.styled-input:focus, .styled-select:focus, .action-btn:focus-visible {
    outline: 2px solid var(--accent-color);
    outline-offset: 2px;
    box-shadow: 0 0 0 3px color-mix(in srgb, var(--accent-color) 30%, transparent);
}
